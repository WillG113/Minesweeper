<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>GUI.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">newMinesweeper</a> &gt; <a href="index.source.html" class="el_package">default</a> &gt; <span class="el_source">GUI.java</span></div><h1>GUI.java</h1><pre class="source lang-java linenums">import javax.swing.*;
import java.awt.*;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;

import static java.awt.BorderLayout.*;

public class GUI extends JFrame {
    private JButton restartButton;
<span class="fc" id="L10">    private final JLabel winLabel = new JLabel(&quot;&quot;);</span>
    private Board gameBoard;
    private JButton[][] buttonArray;
    private int x;
    private int y;


<span class="fc" id="L17">    public GUI(int x, int y) {</span>
<span class="fc" id="L18">        this.x = x;</span>
<span class="fc" id="L19">        this.y = y;</span>
<span class="fc" id="L20">    }</span>

    public Board getGameBoard() {
<span class="fc" id="L23">        return gameBoard;</span>
    }

    public JButton[][] getButtonArray() {
<span class="fc" id="L27">        return buttonArray;</span>
    }

<span class="fc" id="L30">    public JLabel getWinLabel() { return winLabel; }</span>

    public void startGame() {
<span class="fc" id="L33">            gameBoard = new Board(x, y);</span>
<span class="fc" id="L34">            gameBoard.createBoard();</span>

<span class="fc" id="L36">            Container panel = getContentPane();</span>

<span class="fc" id="L38">            Container buttonPane = new Container();</span>
<span class="fc" id="L39">            buttonPane.setLayout(new GridLayout(x, y));</span>

<span class="fc" id="L41">            Container labelContainer = new Container();</span>
<span class="fc" id="L42">            labelContainer.setLayout(new BorderLayout());</span>

<span class="fc" id="L44">            JLabel label= new JLabel(&quot;Minesweeper&quot;);</span>
<span class="fc" id="L45">            label.setHorizontalAlignment(JLabel.CENTER);</span>
<span class="fc" id="L46">            label.setFont(new Font(&quot;Serif&quot;, Font.BOLD, 30));</span>
<span class="fc" id="L47">            labelContainer.add(label, PAGE_START);</span>

<span class="fc" id="L49">            winLabel.setText(&quot;&quot;);</span>
<span class="fc" id="L50">            winLabel.setHorizontalAlignment(JLabel.CENTER);</span>
<span class="fc" id="L51">            labelContainer.add(winLabel, PAGE_END);</span>

<span class="fc" id="L53">            panel.add(labelContainer, PAGE_START);</span>

<span class="fc" id="L55">            restartButton = new JButton(&quot;Restart&quot;);</span>
<span class="fc" id="L56">            restartButton.addActionListener(e -&gt; {</span>
<span class="nc" id="L57">                resetGame();</span>
<span class="nc" id="L58">                startGame();</span>
<span class="nc" id="L59">            });</span>

<span class="fc" id="L61">            buttonArray = new JButton[gameBoard.getX()][gameBoard.getX()];</span>

<span class="fc bfc" id="L63" title="All 2 branches covered.">            for (int i = 0; i &lt; gameBoard.getX(); i++) {</span>
<span class="fc bfc" id="L64" title="All 2 branches covered.">                for (int j = 0; j &lt; gameBoard.getX(); j++) {</span>
<span class="fc" id="L65">                    buttonArray[i][j] = new JButton(&quot;.&quot;);</span>
                }
            }

<span class="fc" id="L69">            int j = 0;</span>
<span class="fc" id="L70">            int k = 0;</span>

<span class="fc bfc" id="L72" title="All 2 branches covered.">            for (int i = 0; i &lt; (gameBoard.getX() * gameBoard.getX()); i++) {</span>
<span class="fc" id="L73">                int l = j;</span>
<span class="fc" id="L74">                int m = k;</span>
<span class="fc" id="L75">                JButton button = buttonArray[l][m];</span>
<span class="fc" id="L76">                button.setBackground(Color.BLACK);</span>
<span class="fc" id="L77">                button.setForeground(Color.WHITE);</span>

<span class="fc" id="L79">                button.addMouseListener(new MouseListener() {</span>

                    @Override
                    public void mouseClicked(MouseEvent e) {
                        //NOT NEEDED
<span class="nc" id="L84">                    }</span>

                    @Override
                    public void mousePressed(MouseEvent e) {

<span class="nc bnc" id="L89" title="All 2 branches missed.">                        if (SwingUtilities.isLeftMouseButton(e)) {</span>
<span class="nc" id="L90">                            hit(button, l, m, gameBoard, buttonArray);</span>
                        }

<span class="nc bnc" id="L93" title="All 2 branches missed.">                        if (SwingUtilities.isRightMouseButton(e)) {</span>
<span class="nc" id="L94">                            flag(button, l, m);</span>
                        }

<span class="nc bnc" id="L97" title="All 2 branches missed.">                        if (SwingUtilities.isMiddleMouseButton(e)) {</span>
<span class="nc" id="L98">                            bulkHit(l, m, buttonArray, gameBoard);</span>
                        }

<span class="nc" id="L101">                    }</span>

                    @Override
                    public void mouseReleased(MouseEvent e) {
                        //NOT NEEDED
<span class="nc" id="L106">                    }</span>

                    @Override
                    public void mouseEntered(MouseEvent e) {
                        //NOT NEEDED
<span class="nc" id="L111">                    }</span>

                    @Override
                    public void mouseExited(MouseEvent e) {
                        //NOT NEEDED
<span class="nc" id="L116">                    }</span>
                });
<span class="fc" id="L118">                buttonPane.add(button);</span>

<span class="fc" id="L120">                k++;</span>
<span class="fc bfc" id="L121" title="All 2 branches covered.">                if (k == gameBoard.getX()) {</span>
<span class="fc" id="L122">                    k = 0;</span>
<span class="fc" id="L123">                    j++;</span>
                }
            }

<span class="fc" id="L127">            panel.add(buttonPane, javax.swing.SwingConstants.CENTER);</span>
<span class="fc" id="L128">            panel.add(restartButton, PAGE_END);</span>
<span class="fc" id="L129">            restartButton.setVisible(false);</span>
<span class="fc" id="L130">        }</span>

        public void resetGame(){
<span class="nc" id="L133">            Container panel = getContentPane();</span>
<span class="nc" id="L134">            panel.removeAll();</span>
<span class="nc" id="L135">        }</span>


        public void hit(JButton button, int l, int m, Board gameBoard, JButton[][] buttonArray){
<span class="fc" id="L139">            button.setBackground(Color.GRAY);</span>
<span class="fc" id="L140">            button.setForeground(Color.BLACK);</span>

<span class="fc" id="L142">            gameBoard.hit(l, m, false);</span>
<span class="fc bfc" id="L143" title="All 2 branches covered.">            if (gameBoard.getBoard()[l][m].checkBomb()) {</span>
<span class="fc" id="L144">                button.setBackground(Color.RED);</span>
<span class="fc" id="L145">                button.setForeground(Color.BLACK);</span>
<span class="fc bfc" id="L146" title="All 2 branches covered.">            } else if (gameBoard.getBoard()[l][m].getTouching() == 0) {</span>
<span class="fc" id="L147">                button.setText(&quot;&quot;);</span>
<span class="fc" id="L148">                recursion(l, m, buttonArray, gameBoard);</span>
            } else {
<span class="fc" id="L150">                button.setText(Integer.toString(gameBoard.getBoard()[l][m].getTouching()));</span>
            }
<span class="fc" id="L152">            checkVictory(buttonArray, gameBoard);</span>
<span class="fc" id="L153">        }</span>

        public void flag(JButton button, int l, int m) {
<span class="fc" id="L156">            gameBoard.setFlag(gameBoard.getBoard()[l][m]);</span>
<span class="pc bpc" id="L157" title="1 of 2 branches missed.">            if (!gameBoard.getBoard()[l][m].isClear()) {</span>
<span class="fc bfc" id="L158" title="All 2 branches covered.">                if (gameBoard.getBoard()[l][m].isFlagged()) {</span>
<span class="fc" id="L159">                    button.setBackground(Color.YELLOW);</span>
<span class="fc" id="L160">                    button.setForeground(Color.BLACK);</span>
<span class="fc" id="L161">                    button.setText(&quot;F&quot;);</span>
                } else {
<span class="fc" id="L163">                    button.setBackground(Color.BLACK);</span>
<span class="fc" id="L164">                    button.setForeground(Color.WHITE);</span>
<span class="fc" id="L165">                    button.setText(&quot;.&quot;);</span>
                }
<span class="fc" id="L167">                checkVictory(buttonArray, gameBoard);</span>
            }
<span class="fc" id="L169">        }</span>

        public void recursion(int l, int m, JButton[][] buttonArray, Board test){
<span class="fc bfc" id="L172" title="All 2 branches covered.">            for(int i = -1; i &lt;= 1; i++) {</span>
<span class="fc bfc" id="L173" title="All 2 branches covered.">                for(int j = -1; j &lt;= 1; j++) {</span>
<span class="fc bfc" id="L174" title="All 8 branches covered.">                    if(l+j &gt;= 0 &amp;&amp; m+i &lt; test.getX() &amp;&amp; m+i &gt;= 0 &amp;&amp; j+l &lt; test.getX()) {</span>
<span class="pc bpc" id="L175" title="1 of 8 branches missed.">                        if(!buttonArray[l+j][m+i].getText().equals(&quot;&quot;) &amp;&amp; test.getBoard()[l+j][m+i].getTouching() == 0 &amp;&amp; !test.getBoard()[l+j][m+i].checkBomb()  &amp;&amp; !test.getBoard()[l+j][m+i].isFlagged()) {</span>
<span class="fc" id="L176">                            buttonArray[l + j][m + i].setText(&quot;&quot;);</span>
<span class="fc" id="L177">                            buttonArray[l + j][m + i].setBackground(Color.GRAY);</span>
<span class="fc" id="L178">                            buttonArray[l + j][m + i].setForeground(Color.BLACK);</span>
                            //buttonArray[l + j][m + i].setEnabled(false);
<span class="fc" id="L180">                            recursion(l + j, m + i, buttonArray, test);</span>
<span class="pc bpc" id="L181" title="2 of 8 branches missed.">                        } else if (!buttonArray[l+j][m+i].getText().equals(&quot;&quot;) &amp;&amp; test.getBoard()[l+j][m+i].getTouching() &gt; 0 &amp;&amp; !test.getBoard()[l+j][m+i].checkBomb() &amp;&amp; !test.getBoard()[l+j][m+i].isFlagged()) {</span>
<span class="fc" id="L182">                            buttonArray[l + j][m + i].setBackground(Color.GRAY);</span>
<span class="fc" id="L183">                            buttonArray[l + j][m + i].setForeground(Color.BLACK);</span>
                            //buttonArray[l + j][m + i].setEnabled(false);
<span class="fc" id="L185">                            buttonArray[l + j][m + i].setText(Integer.toString(test.getBoard()[l+j][m+i].getTouching()));</span>
                        }
                    }
                }
            }
<span class="fc" id="L190">        }</span>

        public void flagAllBombs(JButton[][] buttonArray, Board gameBoard) {
<span class="fc bfc" id="L193" title="All 2 branches covered.">            for(int i = 0; i &lt; gameBoard.getX(); i++) {</span>
<span class="fc bfc" id="L194" title="All 2 branches covered.">                for(int j = 0; j &lt; gameBoard.getX(); j++) {</span>
<span class="fc bfc" id="L195" title="All 2 branches covered.">                    if(gameBoard.getBoard()[i][j].checkBomb()) {</span>
<span class="fc" id="L196">                        buttonArray[i][j].setBackground(Color.RED);</span>
<span class="fc" id="L197">                        buttonArray[i][j].setForeground(Color.BLACK);</span>
                    }
                }
            }
<span class="fc" id="L201">        }</span>

        public void checkVictory(JButton[][] buttonArray, Board gameBoard) {
<span class="fc" id="L204">            gameBoard.checkVictory();</span>
<span class="fc bfc" id="L205" title="All 2 branches covered.">            if(gameBoard.getGameOver()){</span>
<span class="fc bfc" id="L206" title="All 2 branches covered.">                if(gameBoard.victoryState() == 1) {</span>
<span class="fc" id="L207">                    winLabel.setText(&quot;YOU WON! YOU FLAGGED THE MINES&quot;);</span>
<span class="fc bfc" id="L208" title="All 2 branches covered.">                } else if (gameBoard.victoryState() == 2) {</span>
<span class="fc" id="L209">                    winLabel.setText(&quot;YOU WON! YOU CLEARED ALL THE TILES&quot;);</span>
                } else {
<span class="fc" id="L211">                    gameBoard.flagAllBombs();</span>
<span class="fc" id="L212">                    flagAllBombs(buttonArray, gameBoard);</span>
<span class="fc" id="L213">                    winLabel.setText(&quot;YOU LOST!&quot;);</span>
                }
<span class="fc" id="L215">                restartButton.setVisible(true);</span>
            }
<span class="fc" id="L217">        }</span>


        public void bulkHit(int l, int m, JButton[][] buttonArray, Board gameBoard){
<span class="fc bfc" id="L221" title="All 2 branches covered.">            for(int i = -1; i &lt;= 1; i++) {</span>
<span class="fc bfc" id="L222" title="All 2 branches covered.">                for(int j = -1; j &lt;= 1; j++) {</span>
<span class="pc bpc" id="L223" title="4 of 8 branches missed.">                    if(l+j &gt;= 0 &amp;&amp; l+j &lt; gameBoard.getX() &amp;&amp; m+i &gt;= 0 &amp;&amp; m+i &lt; gameBoard.getX()) {</span>
<span class="fc bfc" id="L224" title="All 4 branches covered.">                        if(!buttonArray[l+j][m+i].getText().equals(&quot;F&quot;) &amp;&amp; !gameBoard.getBoard()[l+j][m+i].isClear()) {</span>
<span class="fc" id="L225">                            hit(buttonArray[l+j][m+i], l+j, m+i, gameBoard, buttonArray);</span>
                        }

<span class="fc" id="L228">                        checkVictory(buttonArray, gameBoard);</span>
                    }
                }
            }
<span class="fc" id="L232">        }</span>
    }


</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span></div></body></html>